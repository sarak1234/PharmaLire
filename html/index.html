<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PharMaLirÃ«</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/style.css">
    <script src="../html/js/nav.js" defer></script>
    <script src="../html/js/footer.js" defer></script>

    <style>
        .feature-card {
            border-radius: 12px;
            transition: .2s;
        }
        .feature-card:hover { transform: translateY(-4px); }

        /* Cookie Banner Styles */
        #cookieBanner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #2c3e50;
            color: white;
            padding: 20px;
            z-index: 10000;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }

        .cookie-content { flex:1; min-width:300px; padding-right:20px; }
        .cookie-title { font-weight:bold; font-size:1.2rem; margin-bottom:5px; color:#0b7d50; }
        .cookie-text { font-size:0.9rem; opacity:0.9; }
        .cookie-buttons { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
        .cookie-policy-link { color:#0b7d50; text-decoration:underline; cursor:pointer; font-size:0.9rem; }
        .cookie-policy-link:hover { color:#0a5c3a; }

        /* Chat Demo */
        #chatDemo { position: fixed; bottom:20px; right:20px; width:300px; z-index:15000; }

        /* Responsive adjustments */
        @media (max-width:768px){
            #cookieBanner { flex-direction:column; text-align:center; }
            .cookie-content { padding-right:0; margin-bottom:15px; }
            .cookie-buttons { justify-content:center; }
        }
    </style>
</head>

<body>
<pharma-navbar></pharma-navbar>

<!-- SLIDER -->
<div class="container mt-4">
    <div id="mainSlider" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000" data-bs-pause="hover">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="img/doctor.jpg" class="d-block w-100" alt="medicine shelf">
                <div class="carousel-caption d-none d-md-block" style="bottom:20%; left:10%; text-align:left;">
                    <h3 style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">ShumÃ« produkte mjekÃ«sore nÃ« njÃ« vend</h3>
                    <p style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">MÃ«soni disponueshmÃ«rinÃ« e barnave nÃ« PrishtinÃ«</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/money.jpg" class="d-block w-100" alt="doctor and pills">
                <div class="carousel-caption d-none d-md-block" style="bottom:20%; left:10%; text-align:left;">
                    <h3 style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">Kurseni Para dhe KohÃ«</h3>
                    <p style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">Duke krahasuar produktet ju kurseni kohÃ« dhe para</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="img/mjeku.jpg" class="d-block w-100" alt="pharmacy counter">
                <div class="carousel-caption d-none d-md-block" style="bottom:20%; left:10%; text-align:left;">
                    <h3 style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">Gjej barnatoret nÃ« qytetin tÃ«nd</h3>
                    <p style="color:#fff; text-shadow:0 2px 8px rgba(0,0,0,0.6)">PÃ«rfitoni mÃ« tÃ« mirat nga mÃ« tÃ« mirÃ«t</p>
                </div>
            </div>
        </div>

        <button class="carousel-control-prev" type="button" data-bs-target="#mainSlider" data-bs-slide="prev"
                style="width:60px;background:rgba(0,0,0,0);border-radius:50%;left:10px;">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#mainSlider" data-bs-slide="next"
                style="width:60px;background:rgba(0,0,0,0);border-radius:50%;right:10px;">
            <span class="carousel-control-next-icon"></span>
        </button>

        <div class="carousel-indicators" style="bottom:10px;">
            <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="2"></button>
        </div>
    </div>
</div>

<!-- BIG SEARCH BAR -->
<div class="container mt-5 text-center">
    <h2 class="fw-bold" style="color:#0b7d50;">KÃ«rkoni produktet mjekÃ«sore </h2>
    <p class="text-muted">Krahasoni Ã§mimet dhe gjeni ofertat mÃ« tÃ« mira nÃ« shehÃ«r</p>
    <div class="input-group mt-4 shadow" style="max-width:650px;margin:auto;">
        <input id="bigSearchInput" type="text" class="form-control form-control-lg" placeholder="P.sh. Paracetamol 500mg">
        <button class="btn btn-success btn-lg" id="bigSearchBtn">KÃ«rkoni</button>
    </div>
</div>

<!-- 3 FEATURE CARDS -->
<div class="container mt-5">
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card feature-card shadow-sm p-4 text-center">
                <h5 class="fw-bold" style="color:#0b7d50;">Krahasoni Ã‡mimet</h5>
                <p class="text-muted">Gjeni Ã§mimet mÃ« tÃ« ulÃ«ta nÃ« farmacitÃ« lokale nÃ« qytetin tuaj.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card feature-card shadow-sm p-4 text-center">
                <h5 class="fw-bold" style="color:#0b7d50;">Farmaci tÃ« Licensuara</h5>
                <p class="text-muted">VetÃ«m farmacitÃ« e verifikuara mund tÃ« reklamojnÃ« produktet e tyre nÃ« platformÃ«n tonÃ«.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card feature-card shadow-sm p-4 text-center">
                <h5 class="fw-bold" style="color:#0b7d50;">Kurseni para dhe kohÃ«</h5>
                <p class="text-muted">Krahasimi i Ã§mimeve ju ndihmon tÃ« paguani mÃ« pak dhe kurseni kohÃ« duke i kÃ«rkuar online.</p>
            </div>
        </div>
    </div>
</div>

<!-- COOKIE BANNER -->
<div id="cookieBanner" role="dialog" aria-live="polite" aria-label="Cookie banner" style="display: none;">
    <div class="cookie-content">
        <div class="cookie-title">POLITIKAT E COOKIES</div>
        <div class="cookie-text">
            Ne pÃ«rdorim cookies pÃ«r tÃ« pÃ«rmirÃ«suar pÃ«rvojÃ«n tuaj nÃ« kÃ«tÃ« faqe. Ju mund tÃ« zgjidhni llojin e cookies qÃ« doni tÃ« pranoni.
            <span class="cookie-policy-link" data-bs-toggle="modal" data-bs-target="#cookiePolicyModal">Shikoni politikÃ«n e cookies</span>
        </div>
    </div>
    <div class="cookie-buttons">
        <button class="btn btn-success" id="acceptAllCookies">Pranoni tÃ« gjitha</button>
        <button class="btn btn-outline-light" data-bs-toggle="modal" data-bs-target="#cookieSettingsModal">Zgjidhni manualisht</button>
        <button class="btn btn-link text-white" id="onlyNecessary" style="text-decoration:underline;">VetÃ«m tÃ« nevojshmet</button>
    </div>
</div>

<!-- CHAT DEMO -->
<div id="chatDemo">
    <button id="openChatBtn" class="btn btn-success rounded-circle" style="width:60px;height:60px;font-size:24px; display:none;">ğŸ’¬</button>
    <div id="chatBox" class="card shadow-sm" style="display:none;margin-top:10px;">
        <div class="card-header bg-success text-white d-flex justify-content-between">
            Farmacisti juaj virtual
            <button id="closeChatBtn" class="btn btn-sm btn-light">&times;</button>
        </div>
        <div class="card-body" style="height:300px; overflow-y:auto;">
            <div class="text-muted small">PÃ«rshÃ«ndetje! Si mund t'ju ndihmojmÃ« sot?</div>
        </div>
        <div class="card-footer p-2">
            <div class="input-group">
                <input disabled type="text" class="form-control form-control-sm" placeholder="Shkruani njÃ« mesazh...">
                <button disabled class="btn btn-success btn-sm">DÃ«rgo</button>
            </div>
            <small class="text-muted mt-1 d-block">Chat demo - nuk Ã«shtÃ« funksional</small>
        </div>
    </div>
</div>

<!-- JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const cookieKey = 'pharmalire_cookies_v2';
    const cookieBanner = document.getElementById('cookieBanner');
    const openChatBtn = document.getElementById('openChatBtn');
    const closeChatBtn = document.getElementById('closeChatBtn');
    const chatBox = document.getElementById('chatBox');

    // Check cookie preferences
    function checkCookiePreferences() {
        const saved = localStorage.getItem(cookieKey);
        if (!saved) {
            // Show cookie banner immediately if no preferences saved
            setTimeout(() => {
                cookieBanner.style.display = 'flex';
            }, 500);
        } else {
            cookieBanner.style.display = 'none';
            const prefs = JSON.parse(saved);
            applyCookiePreferences(prefs);
            if(prefs.accepted) openChatBtn.style.display = 'inline-block';
        }
    }

    // Apply preferences
    function applyCookiePreferences(prefs) {
        console.log('Applying cookie preferences:', prefs);
        // Here you can implement actual cookie setting logic
        // For example: if(prefs.analytics) { loadAnalyticsScripts(); }
    }

    // Save preferences
    function savePreferences(prefs) {
        localStorage.setItem(cookieKey, JSON.stringify(prefs));
        cookieBanner.style.display = 'none';
        applyCookiePreferences(prefs);
        if(prefs.accepted) openChatBtn.style.display = 'inline-block';
        alert('ParapÃ«lqimet e cookies u ruajtÃ«n me sukses!');
    }

    // Accept All
    document.getElementById('acceptAllCookies').onclick = () => {
        savePreferences({
            accepted:true,
            analytics:true,
            marketing:true,
            preferences:true,
            date: new Date().toISOString()
        });
    };

    // Only Necessary
    document.getElementById('onlyNecessary').onclick = () => {
        savePreferences({
            accepted:true,
            analytics:false,
            marketing:false,
            preferences:false,
            date: new Date().toISOString()
        });
    };

    // Save Custom Settings
    document.getElementById('saveCookieSettings').onclick = () => {
        const analytics = document.getElementById('analyticsCookies').checked;
        const marketing = document.getElementById('marketingCookies').checked;
        const preferences = document.getElementById('preferenceCookies').checked;
        savePreferences({
            accepted:true,
            analytics,
            marketing,
            preferences,
            date: new Date().toISOString()
        });
    };

    // Load modal saved values
    document.addEventListener('DOMContentLoaded', function(){
        const cookieModal = document.getElementById('cookieSettingsModal');
        if(cookieModal){
            cookieModal.addEventListener('show.bs.modal', function(){
                const saved = JSON.parse(localStorage.getItem(cookieKey) || '{}');
                document.getElementById('analyticsCookies').checked = saved.analytics || false;
                document.getElementById('marketingCookies').checked = saved.marketing || false;
                document.getElementById('preferenceCookies').checked = saved.preferences || false;
            });
        }

        // Big search
        document.getElementById('bigSearchBtn').onclick = () => {
            const q = document.getElementById('bigSearchInput').value.trim();
            if(!q) return alert('Shkruaj emrin e barnÃ«s.');
            alert("KÃ«rkim: " + q + "\n(Kjo Ã«shtÃ« demo)");
        };

        // Chatbox
        openChatBtn.onclick = () => {
            chatBox.style.display = 'block';
            openChatBtn.style.display = 'none';
        };

        closeChatBtn.onclick = () => {
            chatBox.style.display = 'none';
            openChatBtn.style.display = 'inline-block';
        };

        // Initialize cookie banner and chat visibility
        checkCookiePreferences();
    });
</script>

<pharma-footer></pharma-footer>

<!-- COOKIE SETTINGS MODAL -->
<div class="modal fade" id="cookieSettingsModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">CilÃ«simet e Cookies</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="analyticsCookies">
                    <label class="form-check-label">Analytics Cookies</label>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="marketingCookies">
                    <label class="form-check-label">Marketing Cookies</label>
                </div>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="preferenceCookies">
                    <label class="form-check-label">Preference Cookies</label>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Mbyll</button>
                <button class="btn btn-success" id="saveCookieSettings">Ruaj cilÃ«simet</button>
            </div>
        </div>
    </div>
</div>
<!-- COOKIE POLICY MODAL -->
<div class="modal fade" id="cookiePolicyModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Politika e Cookies</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <p>Kjo Ã«shtÃ« politika juaj e cookies. Mund ta ndryshosh tekstin sipas faqes.</p>
                <p>â€¢ PÃ«rdorim cookies pÃ«r funksionim bazik<br>
                    â€¢ PÃ«rdorim cookies tÃ« analizÃ«s<br>
                    â€¢ PÃ«rdorim cookies tÃ« marketingut<br>
                </p>
            </div>

            <div class="modal-footer">
                <button class="btn btn-success" data-bs-dismiss="modal">Mbyll</button>
            </div>
        </div>
    </div>
</div>

</body>
</html>